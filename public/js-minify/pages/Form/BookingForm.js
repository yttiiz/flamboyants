var p=s=>{let e=new FormData(s);for(let[t,o]of e)(o===""||typeof o=="object"&&o.size===0||t.includes("file"))&&e.delete(t);return e},g=s=>{for(let e of s)e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector("input")&&(e.querySelector("input").value="")};var d=class{constructor(){}static setFormData=p;static removeInputsValues=g;static setUserDialogContent=(e,{title:t,paragraph:o})=>{e.querySelector("h2").textContent=t,e.querySelector("p").textContent=o};static setProductDialogContent=(e,{isUserConnected:t,title:o,paragraph:n})=>{e.querySelector("h2").textContent=o,e.querySelector("p").textContent=n,t||t===void 0?e.querySelector(".login-register").classList.contains("none")||e.querySelector(".login-register").classList.add("none"):e.querySelector(".login-register").classList.contains("none")&&e.querySelector(".login-register").classList.remove("none")};static setProfilDialogContent=(e,{title:t,paragraph:o,status:n,handler:r})=>{if(e.querySelector("h2").textContent=t,e.querySelector("p").textContent=o,n)switch(n){case 201:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none");break}case 200:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none"),e.querySelector(".show-message-to-user").classList.contains("none")&&e.querySelector(".show-message-to-user").classList.remove("none"),r&&(e.querySelector("button").removeEventListener("click",r),e.querySelector("button").addEventListener("click",()=>globalThis.location.href="/"));break}}else e.querySelector("form").classList.contains("none")&&e.querySelector("form").classList.remove("none")};static setHomeDialogContent=(e,{title:t,paragraph:o},n)=>{e.querySelector("h2").textContent=t,e.querySelector("p").innerHTML=o;let r=globalThis.navigator.userAgent.includes("Firefox"),i=e.querySelector("input"),c=n.closest("div").nextElementSibling.href;if(i.value=c,r){let a=e.querySelector("div > div"),l=a.querySelector("button");l&&a.removeChild(l);return}e.querySelector("div > div button").addEventListener("click",async a=>{let l=await navigator.permissions.query({name:"clipboard-write"});(l.state==="granted"||l.state==="prompt")&&(navigator.clipboard.writeText(c),i.select(),a.target.textContent="Copi\xE9",setTimeout(()=>{globalThis.getSelection().removeAllRanges(),a.target.textContent="Copier"},2e3))})};static getOrCreateElement=({parent:e,cssSelector:t,hmtlTag:o})=>{let n;return e.querySelector(t)?n=e.querySelector(t):(n=document.createElement(o),e.appendChild(n)),n}};var u=class s extends d{static displayDialogCancelledBooking=async e=>{let{message:t,bookingId:o,isBookingDeleted:n}=await e.json(),r=document.querySelector("#data-booking > dialog");if(s.setUserDialogContent(r,{title:"Annulation r\xE9servation",paragraph:t}),r.showModal(),n){let i=document.querySelector(`form[data-booking-id="${o}"]`).closest("li");i.style.display="none"}}};var m=class{createHTMLElements(...e){let t=[];for(let o of e)t.push(document.createElement(o));return t}createSameHTMLElements(e,t){let o=[];for(let n=0;n<t;n++)o.push(document.createElement(e));return o}setSameHTMLElementAttributes(e,t,...o){if(o.length===1){t===!0?o[0].setAttribute(e,""):o[0][e]=t;return}for(let n of o)t===!0?n.setAttribute(e,""):n[e]=t}insertChildren(e,...t){for(let o of t)e.appendChild(o)}};var f=class extends m{initForm=()=>{let e="#data-booking",t=document.querySelectorAll(`${e} .booking-card form`),o=document.querySelector(`${e} dialog`);this.#e();for(let n of t)n.addEventListener("submit",r=>this.#t(r));o.querySelector("button[data-close]").addEventListener("click",()=>{o.close()})};#e=()=>{let e=globalThis.location.pathname.split("/")[1];document.querySelector(".header-"+e).addEventListener("click",o=>o.preventDefault())};#t=async e=>{e.preventDefault();let t=u.setFormData(e.target),o=e.target.dataset.bookingId,n=e.target.dataset.bookingStart,r=e.target.dataset.bookingEnd,i=e.target.dataset.bookingCreatedAt;t.append("bookingId",o),t.append("bookingStart",n),t.append("bookingEnd",r),t.append("bookingCreatedAt",i);let c=await fetch(e.target.action,{method:"DELETE",body:t,headers:{"Access-Control-Allow-Origin":"*"},mode:"cors"});c.ok&&c.status===200&&u.displayDialogCancelledBooking(c)}};export{f as BookingFormPage};
