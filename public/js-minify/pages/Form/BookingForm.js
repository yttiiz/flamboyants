var m=t=>{let e=new FormData(t);for(let[r,o]of e)(o===""||typeof o=="object"&&o.size===0||r.includes("file"))&&e.delete(r);return e},p=t=>{for(let e of t)e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector("input")&&(e.querySelector("input").value="")},y=class{constructor(){}static setFormData=m;static removeInputsValues=p;static setUserDialogContent=(t,{title:e,paragraph:r})=>{t.querySelector("h2").textContent=e,t.querySelector("p").textContent=r};static setProductDialogContent=(t,{isUserConnected:e,title:r,paragraph:o})=>{t.querySelector("h2").textContent=r,t.querySelector("p").textContent=o,e||e===void 0?t.querySelector(".login-register").classList.contains("none")||t.querySelector(".login-register").classList.add("none"):t.querySelector(".login-register").classList.contains("none")&&t.querySelector(".login-register").classList.remove("none")};static setProfilDialogContent=(t,{title:e,paragraph:r,status:o,handler:n})=>{if(t.querySelector("h2").textContent=e,t.querySelector("p").textContent=r,o)switch(o){case 201:{t.querySelector("form").classList.contains("none")||t.querySelector("form").classList.add("none");break}case 200:{t.querySelector("form").classList.contains("none")||t.querySelector("form").classList.add("none"),t.querySelector(".show-message-to-user").classList.contains("none")&&t.querySelector(".show-message-to-user").classList.remove("none"),n&&(t.querySelector("button").removeEventListener("click",n),t.querySelector("button").addEventListener("click",()=>globalThis.location.href="/"));break}}else t.querySelector("form").classList.contains("none")&&t.querySelector("form").classList.remove("none")};static setHomeDialogContent=(t,{title:e,paragraph:r},o)=>{t.querySelector("h2").textContent=e,t.querySelector("p").innerHTML=r;let n=globalThis.navigator.userAgent.includes("Firefox"),a=t.querySelector("input"),i=o.closest("div").nextElementSibling.href;if(a.value=i,n){let s=t.querySelector("div > div"),l=s.querySelector("button");l&&s.removeChild(l);return}t.querySelector("div > div button").addEventListener("click",async s=>{let l=await navigator.permissions.query({name:"clipboard-write"});(l.state==="granted"||l.state==="prompt")&&(navigator.clipboard.writeText(i),a.select(),s.target.textContent="Copi\xE9",setTimeout(()=>{globalThis.getSelection().removeAllRanges(),s.target.textContent="Copier"},2e3))})};static getOrCreateElement=({parent:t,cssSelector:e,hmtlTag:r})=>{let o;return t.querySelector(e)?o=t.querySelector(e):(o=document.createElement(r),t.appendChild(o)),o}},d=class u extends y{static displayDialogCancelledBooking=async e=>{let{message:r,bookingId:o,isBookingDeleted:n}=await e.json(),a=document.querySelector("#data-booking > dialog");if(u.setUserDialogContent(a,{title:"Annulation r\xE9servation",paragraph:r}),a.showModal(),n){let i=document.querySelector(`form[data-booking-id="${o}"]`).closest("li");i.style.display="none"}}};var c=class{createHTMLElements(...e){let r=[];for(let o of e)r.push(document.createElement(o));return r}createSameHTMLElements(e,r){let o=[];for(let n=0;n<r;n++)o.push(document.createElement(e));return o}setSameHTMLElementAttributes(e,r,...o){if(o.length===1){r===!0?o[0].setAttribute(e,""):o[0][e]=r;return}for(let n of o)r===!0?n.setAttribute(e,""):n[e]=r}insertChildren(e,...r){for(let o of r)e.appendChild(o)}};var g=class extends c{initForm=()=>{let e="#data-booking",r=document.querySelectorAll(`${e} .booking-card form`),o=document.querySelector(`${e} dialog`);this.#e();for(let n of r)n.addEventListener("submit",a=>this.#t(a));o.querySelector("button[data-close]").addEventListener("click",()=>{o.close()})};#e=()=>{let e=globalThis.location.pathname.split("/")[1];document.querySelector(".header-"+e).addEventListener("click",o=>o.preventDefault())};#t=async e=>{e.preventDefault();let r=d.setFormData(e.target),o=e.target.dataset.bookingId,n=e.target.dataset.bookingStart,a=e.target.dataset.bookingEnd,i=e.target.dataset.bookingCreatedAt;r.append("bookingId",o),r.append("bookingStart",n),r.append("bookingEnd",a),r.append("bookingCreatedAt",i);let s=await fetch(e.target.action,{method:"DELETE",body:r,headers:{"Access-Control-Allow-Origin":"*"},mode:"cors"});s.ok&&s.status===200&&d.displayDialogCancelledBooking(s)}};export{g as BookingFormPage};
