var f=o=>{let e=new FormData(o);for(let[r,t]of e)(t===""||typeof t=="object"&&t.size===0||r.includes("file"))&&e.delete(r);return e},p=o=>{for(let e of o)e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector("input")&&(e.querySelector("input").value="")};var l=class{constructor(){}static setFormData=f;static removeInputsValues=p;static setUserDialogContent=(e,{title:r,paragraph:t})=>{e.querySelector("h2").textContent=r,e.querySelector("p").innerHTML=t};static setProductDialogContent=(e,{isUserConnected:r,title:t,paragraph:n})=>{e.querySelector("h2").textContent=t,e.querySelector("p").textContent=n,r||r===void 0?e.querySelector(".login-register").classList.contains("none")||e.querySelector(".login-register").classList.add("none"):e.querySelector(".login-register").classList.contains("none")&&e.querySelector(".login-register").classList.remove("none")};static setProfilDialogContent=(e,{title:r,paragraph:t,status:n,handler:s})=>{if(e.querySelector("h2").textContent=r,e.querySelector("p").textContent=t,n)switch(n){case 201:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none");break}case 200:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none"),e.querySelector(".show-message-to-user").classList.contains("none")&&e.querySelector(".show-message-to-user").classList.remove("none"),s&&(e.querySelector("button").removeEventListener("click",s),e.querySelector("button").addEventListener("click",()=>globalThis.location.href="/"));break}}else e.querySelector("form").classList.contains("none")&&e.querySelector("form").classList.remove("none")};static setHomeDialogContent=(e,{title:r,paragraph:t},n)=>{e.querySelector("h2").textContent=r,e.querySelector("p").innerHTML=t;let s=globalThis.navigator.userAgent.includes("Firefox"),m=e.querySelector("input"),d=n.closest("div").nextElementSibling.href;if(m.value=d,s){let i=e.querySelector("div > div"),a=i.querySelector("button");a&&i.removeChild(a);return}e.querySelector("div > div button").addEventListener("click",async i=>{let a=await navigator.permissions.query({name:"clipboard-write"});(a.state==="granted"||a.state==="prompt")&&(navigator.clipboard.writeText(d),m.select(),i.target.textContent="Copi\xE9",setTimeout(()=>{globalThis.getSelection().removeAllRanges(),i.target.textContent="Copier"},2e3))})};static getOrCreateElement=({parent:e,cssSelector:r,hmtlTag:t})=>{let n;return e.querySelector(r)?n=e.querySelector(r):(n=document.createElement(t),e.appendChild(n)),n}};var c=class o extends l{static displayDialog=async e=>{let r=document.querySelector("#data-contact > dialog"),t={title:"Erreur serveur",paragraph:"Une erreur est survenue du c\xF4t\xE9 du serveur. Veuillez nous excuser pour cette g\xEAne occasionn\xE9e."};if(e)if(e.status===200){let{message:n,title:s}=await e.json();t.title=s,t.paragraph=n}else t.title="Erreur formulaire",t.paragraph="Une erreur est survenue lors de l'envoi du formulaire. Veuillez r\xE9\xE9ssayer ult\xE9rieurement.";o.setUserDialogContent(r,t),r.showModal()}};var u=class{createHTMLElements(...e){let r=[];for(let t of e)r.push(document.createElement(t));return r}createSameHTMLElements(e,r){let t=[];for(let n=0;n<r;n++)t.push(document.createElement(e));return t}setSameHTMLElementAttributes(e,r,...t){if(t.length===1){r===!0?t[0].setAttribute(e,""):t[0][e]=r;return}for(let n of t)r===!0?n.setAttribute(e,""):n[e]=r}insertChildren(e,...r){for(let t of r)e.appendChild(t)}};var y=class extends u{initForm=(e="#data-contact")=>{let r=document.querySelector(`${e} form`),t=document.querySelector(`${e} dialog`);r.addEventListener("submit",n=>this.#e(n)),t.querySelector("button[data-close]").addEventListener("click",()=>{t.close()}),this.handleContactLink()};handleContactLink=()=>{let e=document.querySelector(".header-contact"),r=document.querySelector(".footer-contact");e.addEventListener("click",t=>t.preventDefault()),r.addEventListener("click",t=>t.preventDefault())};#e=async e=>{e.preventDefault();let r=new FormData(e.target),t=e.target.querySelectorAll(".user-infos label");try{let n=await fetch(e.target.action,{method:"POST",body:r,headers:{"Access-Control-Allow-Origin":"*"},mode:"cors"});n.ok&&c.removeInputsValues(t),c.displayDialog(n)}catch{c.displayDialog()}}};export{y as ContactFormPage};
