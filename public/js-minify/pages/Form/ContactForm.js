var p=r=>{let e=new FormData(r);for(let[o,t]of e)(t===""||typeof t=="object"&&t.size===0||o.includes("file"))&&e.delete(o);return e},y=r=>{for(let e of r)e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector("input")&&(e.querySelector("input").value="")},g=class{constructor(){}static setFormData=p;static removeInputsValues=y;static setUserDialogContent=(r,{title:e,paragraph:o})=>{r.querySelector("h2").textContent=e,r.querySelector("p").textContent=o};static setProductDialogContent=(r,{isUserConnected:e,title:o,paragraph:t})=>{r.querySelector("h2").textContent=o,r.querySelector("p").textContent=t,e||e===void 0?r.querySelector(".login-register").classList.contains("none")||r.querySelector(".login-register").classList.add("none"):r.querySelector(".login-register").classList.contains("none")&&r.querySelector(".login-register").classList.remove("none")};static setProfilDialogContent=(r,{title:e,paragraph:o,status:t,handler:n})=>{if(r.querySelector("h2").textContent=e,r.querySelector("p").textContent=o,t)switch(t){case 201:{r.querySelector("form").classList.contains("none")||r.querySelector("form").classList.add("none");break}case 200:{r.querySelector("form").classList.contains("none")||r.querySelector("form").classList.add("none"),r.querySelector(".show-message-to-user").classList.contains("none")&&r.querySelector(".show-message-to-user").classList.remove("none"),n&&(r.querySelector("button").removeEventListener("click",n),r.querySelector("button").addEventListener("click",()=>globalThis.location.href="/"));break}}else r.querySelector("form").classList.contains("none")&&r.querySelector("form").classList.remove("none")};static setHomeDialogContent=(r,{title:e,paragraph:o},t)=>{r.querySelector("h2").textContent=e,r.querySelector("p").innerHTML=o;let n=globalThis.navigator.userAgent.includes("Firefox"),l=r.querySelector("input"),u=t.closest("div").nextElementSibling.href;if(l.value=u,n){let s=r.querySelector("div > div"),a=s.querySelector("button");a&&s.removeChild(a);return}r.querySelector("div > div button").addEventListener("click",async s=>{let a=await navigator.permissions.query({name:"clipboard-write"});(a.state==="granted"||a.state==="prompt")&&(navigator.clipboard.writeText(u),l.select(),s.target.textContent="Copi\xE9",setTimeout(()=>{globalThis.getSelection().removeAllRanges(),s.target.textContent="Copier"},2e3))})};static getOrCreateElement=({parent:r,cssSelector:e,hmtlTag:o})=>{let t;return r.querySelector(e)?t=r.querySelector(e):(t=document.createElement(o),r.appendChild(t)),t}},c=class d extends g{static displayDialog=async e=>{let o=document.querySelector("#data-contact > dialog"),t={title:"Erreur serveur",paragraph:"Une erreur est survenue du c\xF4t\xE9 du serveur. Veuillez nous excuser pour cette g\xEAne occasionn\xE9e."};if(e)if(e.status===200){let{message:n,title:l}=await e.json();t.title=l,t.paragraph=n}else t.title="Erreur formulaire",t.paragraph="Une erreur est survenue lors de l'envoi du formulaire. Veuillez r\xE9\xE9ssayer ult\xE9rieurement.";d.setUserDialogContent(o,t),o.showModal()}};var i=class{createHTMLElements(...e){let o=[];for(let t of e)o.push(document.createElement(t));return o}createSameHTMLElements(e,o){let t=[];for(let n=0;n<o;n++)t.push(document.createElement(e));return t}setSameHTMLElementAttributes(e,o,...t){if(t.length===1){o===!0?t[0].setAttribute(e,""):t[0][e]=o;return}for(let n of t)o===!0?n.setAttribute(e,""):n[e]=o}insertChildren(e,...o){for(let t of o)e.appendChild(t)}};var m=class extends i{initForm=(e="#data-contact")=>{let o=document.querySelector(`${e} form`),t=document.querySelector(`${e} dialog`);o.addEventListener("submit",n=>this.#e(n)),t.querySelector("button[data-close]").addEventListener("click",()=>{t.close()}),this.handleContactLink()};handleContactLink=()=>{let e=document.querySelector(".header-contact"),o=document.querySelector(".footer-contact");e.addEventListener("click",t=>t.preventDefault()),o.addEventListener("click",t=>t.preventDefault())};#e=async e=>{e.preventDefault();let o=new FormData(e.target),t=e.target.querySelectorAll(".user-infos label");try{let n=await fetch(e.target.action,{method:"POST",body:o,headers:{"Access-Control-Allow-Origin":"*"},mode:"cors"});n.ok&&c.removeInputsValues(t),c.displayDialog(n)}catch{c.displayDialog()}}};export{m as ContactFormPage};
