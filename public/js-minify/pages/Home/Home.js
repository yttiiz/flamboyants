var m=class{createHTMLElements(...e){let r=[];for(let t of e)r.push(document.createElement(t));return r}createSameHTMLElements(e,r){let t=[];for(let n=0;n<r;n++)t.push(document.createElement(e));return t}setSameHTMLElementAttributes(e,r,...t){if(t.length===1){r===!0?t[0].setAttribute(e,""):t[0][e]=r;return}for(let n of t)r===!0?n.setAttribute(e,""):n[e]=r}insertChildren(e,...r){for(let t of r)e.appendChild(t)}};var p=a=>{let e=new FormData(a);for(let[r,t]of e)(t===""||typeof t=="object"&&t.size===0||r.includes("file"))&&e.delete(r);return e},f=a=>{for(let e of a)e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector("input")&&(e.querySelector("input").value="")};var d=class{constructor(){}static setFormData=p;static removeInputsValues=f;static setUserDialogContent=(e,{title:r,paragraph:t})=>{e.querySelector("h2").textContent=r,e.querySelector("p").innerHTML=t};static setProductDialogContent=(e,{isUserConnected:r,title:t,paragraph:n})=>{e.querySelector("h2").textContent=t,e.querySelector("p").textContent=n,r||r===void 0?e.querySelector(".login-register").classList.contains("none")||e.querySelector(".login-register").classList.add("none"):e.querySelector(".login-register").classList.contains("none")&&e.querySelector(".login-register").classList.remove("none")};static setProfilDialogContent=(e,{title:r,paragraph:t,status:n,handler:o})=>{if(e.querySelector("h2").textContent=r,e.querySelector("p").textContent=t,n)switch(n){case 201:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none");break}case 200:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none"),e.querySelector(".show-message-to-user").classList.contains("none")&&e.querySelector(".show-message-to-user").classList.remove("none"),o&&(e.querySelector("button").removeEventListener("click",o),e.querySelector("button").addEventListener("click",()=>globalThis.location.href="/"));break}}else e.querySelector("form").classList.contains("none")&&e.querySelector("form").classList.remove("none")};static setHomeDialogContent=(e,{title:r,paragraph:t},n)=>{e.querySelector("h2").textContent=r,e.querySelector("p").innerHTML=t;let o=globalThis.navigator.userAgent.includes("Firefox"),s=e.querySelector("input"),l=n.closest("div").nextElementSibling.href;if(s.value=l,o){let c=e.querySelector("div > div"),i=c.querySelector("button");i&&c.removeChild(i);return}e.querySelector("div > div button").addEventListener("click",async c=>{let i=await navigator.permissions.query({name:"clipboard-write"});(i.state==="granted"||i.state==="prompt")&&(navigator.clipboard.writeText(l),s.select(),c.target.textContent="Copi\xE9",setTimeout(()=>{globalThis.getSelection().removeAllRanges(),c.target.textContent="Copier"},2e3))})};static getOrCreateElement=({parent:e,cssSelector:r,hmtlTag:t})=>{let n;return e.querySelector(r)?n=e.querySelector(r):(n=document.createElement(t),e.appendChild(n)),n}};var y=class extends m{constructor(){super()}renderContent=e=>{this.#e({buttonsSelector:".social-btns button:last-of-type",dialogSelector:"#data-home dialog"}),this.#t(e),this.handleHomeLink()};handleHomeLink=()=>{let e=document.querySelector("#logo > a"),r=document.querySelector(".footer-home");e.addEventListener("click",t=>t.preventDefault()),r.addEventListener("click",t=>t.preventDefault())};renderError=({errorMsg:e})=>{document.querySelector("#visits")&&(document.querySelector("#visits").innerHTML=`
      <div class="container">
        <div>
          <h1>Connexion impossible</h1>
          <p>${e}</p>
        </div>
      </div>`)};#e=({buttonsSelector:e,dialogSelector:r})=>{let t=document.querySelector(r),n=document.querySelectorAll(e);for(let o of n)o.addEventListener("click",s=>{let l=s.currentTarget.closest("li").querySelector("h2").textContent;d.setHomeDialogContent(t,{title:"Partagez sur les r\xE9seaux",paragraph:`Copiez le lien vers <b>${l}</b>, ci-dessous, pour le partager o\xF9 vous le souhaitez.`},s.currentTarget),t.showModal()});t.querySelector("button[data-close]").addEventListener("click",()=>{t.close()})};#t=(e,r=document.querySelector(".visits-cards"))=>{r.innerHTML="";for(let t of Object.keys(e)){let[n,o,s]=this.createHTMLElements("li","figure","img"),[l,c,i,u]=this.createHTMLElements("div","h2","p","a");s.src=e[t].image,s.alt=e[t].title,c.textContent=e[t].title,i.textContent=e[t].text,u.href=e[t].href,u.target="_blank",u.textContent="En savoir plus",r.className="visits-cards",this.insertChildren(o,s),this.insertChildren(l,c,i,u),this.insertChildren(n,o,l),this.insertChildren(r,n)}}};export{y as HomePage};
