var m=class{createHTMLElements(...e){let r=[];for(let t of e)r.push(document.createElement(t));return r}createSameHTMLElements(e,r){let t=[];for(let n=0;n<r;n++)t.push(document.createElement(e));return t}setSameHTMLElementAttributes(e,r,...t){if(t.length===1){r===!0?t[0].setAttribute(e,""):t[0][e]=r;return}for(let n of t)r===!0?n.setAttribute(e,""):n[e]=r}insertChildren(e,...r){for(let t of r)e.appendChild(t)}};var v=l=>{let e=new FormData(l);for(let[r,t]of e)(t===""||typeof t=="object"&&t.size===0||r.includes("file"))&&e.delete(r);return e},q=l=>{for(let e of l)e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector("input")&&(e.querySelector("input").value="")};var d=class{constructor(){}static setFormData=v;static removeInputsValues=q;static setUserDialogContent=(e,{title:r,paragraph:t})=>{e.querySelector("h2").textContent=r,e.querySelector("p").innerHTML=t};static setProductDialogContent=(e,{isUserConnected:r,title:t,paragraph:n})=>{e.querySelector("h2").textContent=t,e.querySelector("p").textContent=n,r||r===void 0?e.querySelector(".login-register").classList.contains("none")||e.querySelector(".login-register").classList.add("none"):e.querySelector(".login-register").classList.contains("none")&&e.querySelector(".login-register").classList.remove("none")};static setProfilDialogContent=(e,{title:r,paragraph:t,status:n,handler:o})=>{if(e.querySelector("h2").textContent=r,e.querySelector("p").textContent=t,n)switch(n){case 201:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none");break}case 200:{e.querySelector("form").classList.contains("none")||e.querySelector("form").classList.add("none"),e.querySelector(".show-message-to-user").classList.contains("none")&&e.querySelector(".show-message-to-user").classList.remove("none"),o&&(e.querySelector("button").removeEventListener("click",o),e.querySelector("button").addEventListener("click",()=>globalThis.location.href="/"));break}}else e.querySelector("form").classList.contains("none")&&e.querySelector("form").classList.remove("none")};static setHomeDialogContent=(e,{title:r,paragraph:t},n)=>{e.querySelector("h2").textContent=r,e.querySelector("p").innerHTML=t;let o=globalThis.navigator.userAgent.includes("Firefox"),i=e.querySelector("input"),a=n.closest("div").nextElementSibling.href;if(i.value=a,o){let s=e.querySelector("div > div"),c=s.querySelector("button");c&&s.removeChild(c);return}e.querySelector("div > div button").addEventListener("click",async s=>{let c=await navigator.permissions.query({name:"clipboard-write"});(c.state==="granted"||c.state==="prompt")&&(navigator.clipboard.writeText(a),i.select(),s.target.textContent="Copi\xE9",setTimeout(()=>{globalThis.getSelection().removeAllRanges(),s.target.textContent="Copier"},2e3))})};static getOrCreateElement=({parent:e,cssSelector:r,hmtlTag:t})=>{let n;return e.querySelector(r)?n=e.querySelector(r):(n=document.createElement(t),e.appendChild(n)),n}};var b=class extends m{constructor(){super()}renderContent=e=>{this.#e({buttonsSelector:".social-btns button:last-of-type",dialogSelector:"#data-home dialog"}),this.#t(e),this.handleHomeLink()};handleHomeLink=()=>{let e=document.querySelector("#logo > a"),r=document.querySelector(".footer-home");e.addEventListener("click",t=>t.preventDefault()),r.addEventListener("click",t=>t.preventDefault())};renderError=({errorMsg:e})=>{document.querySelector("#visits")&&(document.querySelector("#visits").innerHTML=`
      <div class="container">
        <div>
          <h1>Connexion impossible</h1>
          <p>${e}</p>
        </div>
      </div>`)};#e=({buttonsSelector:e,dialogSelector:r})=>{let t=document.querySelector(r),n=document.querySelectorAll(e);for(let o of n)o.addEventListener("click",i=>{let a=i.currentTarget.closest("li").querySelector("h2").textContent;d.setHomeDialogContent(t,{title:"Partagez sur les r\xE9seaux",paragraph:`Copiez le lien vers <b>${a}</b>, ci-dessous, pour le partager o\xF9 vous le souhaitez.`},i.currentTarget),t.showModal()});t.querySelector("button[data-close]").addEventListener("click",()=>{t.close()})};#t=(e,r=document.querySelector(".visits-cards"))=>{r.innerHTML="";for(let{image:t,paragraph:n,href:o,location:i,title:a}of e.items){let[s,c,p]=this.createHTMLElements("li","figure","img"),[f,y,h,g,S,u]=this.createHTMLElements("div","h2","h3","img","p","a");p.src=t.src,p.alt=t.alt,y.textContent=a,g.src="/img/icons/location.svg",S.textContent=n,u.href=o,u.target="_blank",u.textContent="En savoir plus",this.insertChildren(h,g,document.createTextNode(i)),r.className="visits-cards",this.insertChildren(c,p),this.insertChildren(f,y,h,S,u),this.insertChildren(s,c,f),this.insertChildren(r,s)}}};export{b as HomePage};
